# AGENTS.md（项目级 · 通用模板）

> 通用规范：请同时遵循本仓库根目录的 `AGENTS.base.md`（通用版）。  
> 本文件仅定义本项目的技术事实、工程边界与交付验收门槛。  
> 若两者冲突，以本文件 `AGENTS.md` 为准。  
> 仓库根目录必须同时存在 `AGENTS.md` 与 `AGENTS.base.md`。

---

## 项目技术栈与事实约定（项目级）

> 本节用于声明**项目事实**，不是设计建议，AI 不得偏离。

- 语言：{Language}
- 框架 / 运行环境：{Framework / Runtime}
- 接口形式：
  - {Protocol / API Style}（如 gRPC / HTTP / GraphQL 等）
  - 接口定义位置：{Interface Definition Path}
  - 生成代码位置：{Generated Code Path}
- 数据存储：
  - 主存储：{DB Type}
  - 缓存 / 辅助存储：{Cache / KV}
- 消息 / 异步机制（如存在）：{MQ / Event System}
- 代码生成规则（如存在）：
  - 生成来源：{Proto / Schema / DSL}
  - 生成文件是否允许手改：{Yes / No}

---

## 目录结构与分层边界（项目级）

> 本节用于明确：  
> **代码应放在哪里**，以及 **允许的调用方向**。

### 分层调用规则
```
{Layer A} -> {Layer B} -> {Layer C} -> {Data / External}
```

- 禁止跨层调用
- 数据访问必须通过指定的数据访问层
- 不得新增未约定的新层级或绕过既有边界

### 目录结构说明
```
{project-root}/
├── {dir-1} # 说明
├── {dir-2} # 说明
└── {dir-n} # 说明
```


---

## Bug 修复细则（项目级）

- Bug 修复应以**最小必要改动**为目标，避免顺带重构
- 替换旧实现时的处理方式：{注释保留 / 允许删除 / 其他}
- 当修复代码明显膨胀时的处理规则：{如：另起函数 / 模块}
- 修复完成后，必须说明影响的接口或行为范围
- 修复或测试过程中产生的临时文件 / 构建产物必须清理

---

## 新需求开发约束（项目级）

- 开发前必须先确认需求、边界与验收标准
- 禁止基于猜测直接实现
- 对既有代码的修改策略：
  - {仅扩展 / 允许重构 / 需确认后重构}
- 对生成代码 / 协议文件的修改规则：
  - {禁止手改 / 允许但需说明 / 其他}

---

## 测试与交付验收门槛（项目级）

> 本节定义**是否允许交付**的最低条件。

### 本地 / 测试环境依赖
- 存储：{DB / Version / Addr}
- 缓存：{Cache / Addr}
- 其他依赖：{MQ / External Service}

### 验收要求
- 涉及逻辑修改的代码，必须通过：
  - {Test Command}
  - {Lint / Static Check}
- 涉及并发 / 状态共享的修改，必须通过：
  - {Race / Concurrency Check}
- 测试失败视为修改未完成，不得交付

### 测试例外处理
- 若无法补充测试，必须：
  - 明确说明原因
  - 提供**可执行的替代验证方式**

---

## 项目级禁止事项（可选）

- 禁止事项 1：{描述}
- 禁止事项 2：{描述}
- 禁止事项 3：{描述}