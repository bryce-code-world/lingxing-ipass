{{ define "orders" }}
  {{ template "layout_head" . }}
  <h1 class="h1">DSCO Order Sync</h1>
  <div class="card">
    <div class="filters-grid" id="ordersFilters">
      <input class="input sm" id="qPo" placeholder="po_number like" />
      <input class="input sm" id="qRetailer" placeholder="dsco_retailer_id" />
      <input class="input sm" id="qMSKU" placeholder="msku" />
      <input class="input sm" id="qWarehouse" placeholder="warehouse_id" />
      <input class="input sm" id="qShipment" placeholder="shipment" />
      <select class="select sm" id="qDscoStatus">
        <option value="">dsco_status (all)</option>
        <option value="created">created</option>
        <option value="shipment_pending">shipment_pending</option>
        <option value="shipped">shipped</option>
        <option value="cancelled">cancelled</option>
      </select>

      <input class="input sm" id="qTracking" placeholder="tracking contains" />
      <input class="input sm" id="qInvoice" placeholder="invoice_id contains" />
      <select class="select sm" id="qStatus">
        <option value="">status (all)</option>
        <option value="1">1 待同步（推单到领星）</option>
        <option value="2">2 待确认（回传 ACK）</option>
        <option value="3">3 待发货回传（已确认）</option>
        <option value="4">4 待发票回传（已发货）</option>
        <option value="5">5 完成（已回传发票）</option>
        <option value="6">6 已取消</option>
      </select>
      <input class="input sm" id="qStartDT" type="datetime-local" />
      <input class="input sm" id="qEndDT" type="datetime-local" />
      <select class="select sm" id="qLimit" onchange="adminSetOrdersLimit()">
        <option value="20">20 / page</option>
        <option value="50" selected>50 / page</option>
        <option value="100">100 / page</option>
        <option value="200">200 / page</option>
      </select>

      <div class="filters-actions">
        <button class="btn" onclick="adminLoadOrders(0)">Search</button>
        <button class="btn" onclick="adminExportOrders()">Export CSV</button>
      </div>
    </div>
    <div class="muted" style="margin-top: 8px;">时间按 <code id="tzLabel"></code> 显示；筛选输入按该时区解释；end 为开区间。[start,end)。</div>
  </div>

  <div class="card" style="margin-top: 16px;">
    <div class="row">
      <div class="k">Results</div>
      <div class="spacer"></div>
      <div class="muted" id="ordersMeta"></div>
    </div>
    <div class="row wrap" id="ordersColumns" style="margin-top: 10px;"></div>
    <div class="table-wrap">
      <table class="table table-tight" id="ordersTable">
        <thead>
          <tr>
            <th data-col="id">id</th>
            <th data-col="po_number">po_number</th>
            <th data-col="dsco_create_time">dsco_create_time</th>
            <th data-col="pulled_at">pulled_at</th>
            <th data-col="updated_at">updated_at</th>
            <th data-col="dsco_status">dsco_status</th>
            <th data-col="status">status</th>
            <th data-col="wh_ship">warehouse-shipment</th>
            <th data-col="dsco_retailer_id">dsco_retailer_id</th>
            <th data-col="sku">sku</th>
            <th data-col="tracking">tracking</th>
            <th data-col="invoice_id">invoice_id</th>
            <th data-col="actions">actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="row" style="margin-top: 12px;">
      <button class="btn" onclick="adminPrevOrders()">Prev</button>
      <button class="btn" onclick="adminNextOrders()">Next</button>
      <div class="spacer"></div>
      <div class="muted" id="ordersPage"></div>
    </div>
  </div>
  {{ template "layout_foot" . }}
{{ end }}
